<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kemahasiswaan — Prestasi Mahasiswa</title>

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    referrerpolicy="no-referrer" />
</head>
<body>

  <nav>
    <div class="nav-inner">
      <a class="logolink" href="tentangkami.html"><img src="image/logo.png" alt="Logo FMIPA"></a>
      <div class="navigation">
        <ul>
          <li><a href="index.html">Tentang Kami</a></li>
          <li><a href="fasilitas.html">Fasilitas</a></li>
          <li><a href="kemahasiswaan.html" class="active">Kemahasiswaan</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <header id="fasilitas-hero" class="hero">
    <div class="container">
      <h1>Prestasi Mahasiswa</h1>
      <p class="lead">Daftar prestasi mahasiswa per jurusan — cari, filter, dan paging.</p>
    </div>
  </header>

  <main class="container">

    <div class="fasilitas-layout">

      <aside class="cluster-side" aria-label="Daftar jurusan">
        <div class="cluster-list" id="cluster-list">
          <button class="cluster-btn active" data-cluster="biologi" data-count="2"><span>Biologi</span><span class="cluster-count">2</span></button>
          <button class="cluster-btn" data-cluster="geofisika" data-count="10"><span>Geofisika</span><span class="cluster-count">10</span></button>
          <button class="cluster-btn" data-cluster="rekayasa" data-count="10"><span>Rekayasa Sistem Komputer</span><span class="cluster-count">10</span></button>
        </div>
      </aside>

      <section class="fasilitas-main" aria-live="polite">
        <div class="table-actions">
          <div class="show-info muted" id="show-info">Menampilkan 10 baris per halaman</div>
          <div class="search-box">
            <input id="search-input" placeholder="Cari nama / nama lomba / tahun..." aria-label="Cari">
          </div>
        </div>

        <div class="table-wrap" role="region" aria-label="Tabel prestasi">
          <table class="table-simple table-fasilitas">
            <thead>
              <tr>
                <th style="width:6%;">No</th>
                <th style="width:22%;">Nama Mahasiswa</th>
                <th style="width:48%;">Nama Lomba / Kegiatan</th>
                <th style="width:16%;">Prestasi / Gelar</th>
                <th style="width:8%;">Tahun</th>
              </tr>
            </thead>
            <tbody id="prestasi-tbody">
            </tbody>
          </table>
        </div>

        <div class="pager" id="pager" aria-label="Pagination controls">
          <button id="prev-page" class="pager-btn" aria-label="Halaman sebelumnya">Prev</button>
          <div id="page-numbers" class="page-numbers" role="navigation" aria-label="Nomor halaman"></div>
          <button id="next-page" class="pager-btn" aria-label="Halaman berikutnya">Next</button>
        </div>

      </section>
    </div>

  </main>

    <footer id="footer">
        <div class="footer-container">

            <div class="footer-left">
                <img src="image/logo.png" class="footer-logo" alt="">
                <h2>FAKULTAS MATEMATIKA DAN ILMU PENGETAHUAN ALAM</h2>
                <p><i class="fas fa-map-marker-alt"></i>JL. Prof. Dr. H. Hadari Nawawi - Kode Pos: 78124</p>
                <p><i class="fas fa-phone-alt"></i> (0561) 577963</p>
                <p><i class="fas fa-envelope"></i>info@fmipa.untan.ac.id</p>
            </div>

            <div class="footer-middle">
                <ul>
                    <li>Siakad</li>
                    <li>E-Learning</li>
                    <li>Website Kampus</li>
                    <li>Layanan IT</li>
                </ul>
            </div>

            <div class="footer-right">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3989.8161239285587!2d109.34396307358881!3d-0.06011989993927903!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e1d599127523ec9%3A0x752e4fa340c5556d!2sFakultas%20Matematika%20dan%20Ilmu%20Pengetahuan%20Alam%20(F-MIPA)%20-%20Untan!5e0!3m2!1sid!2sid!4v1763421208601!5m2!1sid!2sid" width="400" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>

        <div class="footer-bottom">
            <p>© <span id="year"></span> FMIPA UNTAN</p>
        </div>
    </footer>

<script>
const dataByJurusan = {
  biologi: [
    { nama: "Evi Marina Sirait", lomba: "Olimpiade Semirata Bidang Biologi BKS PTN Barat", prestasi: "Medali Perunggu", tahun: "2019" },
    { nama: "Albertus Williem", lomba: "Olimpiade Semirata Bidang Biologi BKS PTN Barat", prestasi: "Medali Perunggu", tahun: "2019" }
  ],
  geofisika: [
    { nama: "Marsita Ulfa (NIM: H1071141032)", lomba: "Program Scholarship Hunters 2018 diselenggarakan oleh Languange Lover Community", prestasi: "Partisipan", tahun: "2018" },
    { nama: "Vikki (NIM: H1071171016)", lomba: "Lomba Debat Nasional tahun 2018 di Universitas Bangka Belitung", prestasi: "Finalis", tahun: "2018" },
    { nama: "Rahwanda (NIM: H1071151036)", lomba: "Program Hibah Bina Desa (PHBD) Belmawa Kementerian Ristekdikti", prestasi: "Penerima Program", tahun: "2018" },
    { nama: "Vikki (NIM: H1071171016)", lomba: "Lomba Debat Nasional tahun 2018 di Universitas Islam Negeri (UIN) Alauddin Makassar", prestasi: "Juara Harapan III", tahun: "2018" },
    { nama: "Merlyn Elsyani (NIM: H1071171035)", lomba: "Lomba Puisi Parsial 7 oleh Art Laboratory FMIPA UNTAN tahun 2018", prestasi: "Juara III", tahun: "2018" },
    { nama: "Nurcholis Thorik (NIM: H1071171030)", lomba: "Lomba Pekan Karya Ilmiah Fisika (Pekamika) oleh HIMAFIS FMIPA UNTAN", prestasi: "Juara I", tahun: "2018" },
    { nama: "Kunto Adi Nugroho (NIM: H1071161019)", lomba: "Lomba Catur Putra Dekan Cup tahun 2018 BEM FMIPA UNTAN", prestasi: "Juara III", tahun: "2018" },
    { nama: "Tim Voli Putri HIMAFIS", lomba: "Lomba Catur Putra Dekan Cup tahun 2018 oleh BEM FMIPA UNTAN", prestasi: "Juara II", tahun: "2018" },
    { nama: "Tim Voli Putra HIMAFIS", lomba: "Lomba Voli Putra Dekan Cup tahun 2018 oleh BEM FMIPA UNTAN.", prestasi: "Juara III", tahun: "2018" },
    { nama: "Tim Futsal Putra HIMAFIS", lomba: "Lomba Futsal Putra Dekan Cup tahun 2018 oleh BEM FMIPA UNTAN", prestasi: "Juara II", tahun: "2018" }
  ],
  rekayasa: [
    { nama: "Yunita Erniajan", lomba: "USU Open 2022", prestasi: "4th Novice Best Speaker USU Open 2022", tahun: "2022" },
    { nama: "Tim MAT Store", lomba: "Kompetisi Kewirausahaan Mahasiswa FMIPA Untan tahun 2022", prestasi: "Tim Terbaik", tahun: "2022" },
    { nama: "Tim D’Glitter", lomba: "Kompetisi Kewirausahaan Mahasiswa FMIPA Untan tahun 2022", prestasi: "Tim Terbaik", tahun: "2022" },
    { nama: "Yunita Erniajan", lomba: "National University Debating Championship tahun 2022", prestasi: "Best Novice Speaker", tahun: "2022" },
    { nama: "Tim Amallan", lomba: "Inovasi Wirausaha Digital Mahasiswa (Kemendikbudristek)", prestasi: "Lolos Pendanaan", tahun: "2022" },
    { nama: "Tim Fas Bouquet", lomba: "Kompetisi Kewirausahaan Mahasiswa FMIPA Untan tahun 2022", prestasi: "Tim Terbaik", tahun: "2022" },
    { nama: "Tokas team", lomba: "Startup Business Goes to INFORMERS Revolution 5.0", prestasi: "Juara 1 START-UP IDEA Competition", tahun: "2022" },
    { nama: "E-Vent team", lomba: "Startup Business Goes to INFORMERS Revolution 5.0", prestasi: "Juara 3 START-UP IDEA Competition", tahun: "2022" },
    { nama: "Tim Amallan", lomba: "KMI Award (Kemendikbudristek) 2022", prestasi: "Lolos KMI Award", tahun: "2022" },
    { nama: "Yunita Erniajan", lomba: "Sanata Dharma Open English Debating", prestasi: "6th Novice Best Speaker", tahun: "2022" }
  ]
};

const PAGE_SIZE = 10;

let state = {
  jurusan: 'biologi',
  page: 1,
  filtered: []
};

const trunc = (s, n=80) => s && s.length > n ? s.slice(0,n) + '…' : s;

function renderTable() {
  const base = state.filtered.length ? state.filtered : (dataByJurusan[state.jurusan] || []);
  const tbody = document.getElementById('prestasi-tbody');
  tbody.innerHTML = '';
  const start = (state.page - 1) * PAGE_SIZE;
  const slice = base.slice(start, start + PAGE_SIZE);

  slice.forEach((row, idx) => {
    const tr = document.createElement('tr');
    const no = document.createElement('td'); no.className='center'; no.textContent = start + idx + 1;
    const nama = document.createElement('td'); nama.textContent = row.nama; nama.title = row.nama;
    const lomba = document.createElement('td'); lomba.textContent = trunc(row.lomba, 120); lomba.title = row.lomba;
    const prestasi = document.createElement('td'); prestasi.textContent = row.prestasi; prestasi.title = row.prestasi;
    const tahun = document.createElement('td'); tahun.className='center'; tahun.textContent = row.tahun;

    tr.appendChild(no); tr.appendChild(nama); tr.appendChild(lomba); tr.appendChild(prestasi); tr.appendChild(tahun);
    tbody.appendChild(tr);
  });

  renderPager(Math.ceil((base.length || 0) / PAGE_SIZE));
  updateShowInfo(base.length || 0);
}

function renderPager(totalPages) {
  const pageNumbers = document.getElementById('page-numbers');
  pageNumbers.innerHTML = '';
  document.getElementById('prev-page').disabled = state.page <= 1;
  document.getElementById('next-page').disabled = state.page >= totalPages || totalPages === 0;

  for (let i=1;i<=totalPages;i++){
    const btn = document.createElement('button');
    btn.className = 'page-num' + (i===state.page ? ' active' : '');
    btn.textContent = i;
    btn.addEventListener('click', ()=> { state.page = i; renderTable(); window.scrollTo({top: document.querySelector('.fasilitas-main').offsetTop - 80, behavior:'smooth'}); });
    pageNumbers.appendChild(btn);
  }
}

function updateShowInfo(total) {
  const el = document.getElementById('show-info');
  const start = (state.page -1)*PAGE_SIZE + 1;
  const end = Math.min(state.page * PAGE_SIZE, total);
  el.textContent = `Menampilkan ${start <= total ? start : 0} to ${end} dari ${total} entri`;
}

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.cluster-btn').forEach(btn=>{
    btn.addEventListener('click', () => {
      document.querySelectorAll('.cluster-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      state.jurusan = btn.dataset.cluster;
      state.page = 1; state.filtered = [];
      document.getElementById('search-input').value = '';
      renderTable();
    });
  });

  const searchInput = document.getElementById('search-input');
  searchInput.addEventListener('input', (e)=>{
    const q = e.target.value.trim().toLowerCase();
    const base = dataByJurusan[state.jurusan] || [];
    if(!q){ state.filtered = []; state.page = 1; renderTable(); return; }
    state.filtered = base.filter(r => (r.nama + ' ' + r.lomba + ' ' + r.prestasi + ' ' + r.tahun).toLowerCase().includes(q));
    state.page = 1; renderTable();
  });

  document.getElementById('prev-page').addEventListener('click', ()=> {
    if(state.page>1){ state.page--; renderTable(); window.scrollTo({top: document.querySelector('.fasilitas-main').offsetTop - 80, behavior:'smooth'}); }
  });
  document.getElementById('next-page').addEventListener('click', ()=> {
    const base = state.filtered.length ? state.filtered : (dataByJurusan[state.jurusan] || []);
    const total = Math.ceil(base.length / PAGE_SIZE);
    if(state.page < total){ state.page++; renderTable(); window.scrollTo({top: document.querySelector('.fasilitas-main').offsetTop - 80, behavior:'smooth'}); }
  });

  const yearEl = document.getElementById('year'); if(yearEl) yearEl.textContent = new Date().getFullYear();

  renderTable();
});
</script>

</body>
</html>
